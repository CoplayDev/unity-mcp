# Scene Build Request (Compact)
Use Unity-MCP tools only.

Rules:
R1 Use the `unity-mcp-orchestrator` skill first and follow its best-practice workflow.
R2 Execute phases in order; obey each phase batch_size_limit and fail_fast.
R3 For mutating phases, use batch_execute with each phase's commands.
R4 After each batch_execute, run scene_generator(action='audit_batch_result').
R5 If audit decision=retry, bounded retry. If fail, stop.
R6 Smoke test is mandatory before scene save.
R7 If essence_hash exists, preserve semantics and phase meaning (surface-only variation).
R8 Avoid tag lookups in scripts (CompareTag / FindGameObjectsWithTag).
R9 create_script code contents are omitted in this export; generate code from manager/script tasks and create scripts only via create_script (no local file writes).
R10 Keep phase order: Intro -> Explore -> Trigger -> Observe Feedback Loop -> Summary.
R11 Primitive-first policy active: do not use Trellis or manage_3d_gen.

SCENE_SPEC_MIN_JSON:
{"target_concept":"AI Recommendation System","analogy_domain":"Bee Pollination in a Garden","learning_goal":"Understand how recommendation systems use user profiles, content features, and feedback loops to personalize suggestions","task_label":"Task 1: Beehive Analogy","surface":{"style_seed":0,"style_mood":"natural","variation_level":"medium","character_style":"default","asset_style":"default","ui_skin":"default","vfx_style":"default"},"mappings":[{"structural_component":"user","analogy_name":"Bee","mapping_type":"object","asset_strategy":"primitive","instance_count":null,"instance_spread":null},{"structural_component":"content_item","analogy_name":"Flower","mapping_type":"object","asset_strategy":"primitive","instance_count":8,"instance_spread":4.0},{"structural_component":"user_profile","analogy_name":"Beehive","mapping_type":"object","asset_strategy":"primitive","instance_count":null,"instance_spread":null},{"structural_component":"user_interaction","analogy_name":"Pollination","mapping_type":"relation","asset_strategy":"vfx","instance_count":null,"instance_spread":null},{"structural_component":"profile_update","analogy_name":"BeehiveMovement","mapping_type":"relation","asset_strategy":"mechanic","instance_count":null,"instance_spread":null},{"structural_component":"candidate_generation","analogy_name":"PollenCircle","mapping_type":"relation","asset_strategy":"primitive","instance_count":null,"instance_spread":null},{"structural_component":"ranking","analogy_name":"BudGrowth","mapping_type":"relation","asset_strategy":"mechanic","instance_count":null,"instance_spread":null},{"structural_component":"feedback_loop","analogy_name":"GardenDynamics","mapping_type":"higher_order","asset_strategy":"mechanic","instance_count":null,"instance_spread":null}]}

EXECUTION_PLAN_JSON:
{"summary":{"total_commands":107,"estimated_batches":10,"trellis_count":0},"phases":[{"phase_name":"validate_essence","phase_number":0,"commands":[{"tool":"scene_generator","params":{"action":"validate_essence_surface","spec_json":"{\"target_concept\":\"AI Recommendation System\",\"analogy_domain\":\"Bee Pollination in a Garden\",\"learning_goal\":\"Understand how recommendation systems use user profiles, content features, and feedback loops to personalize suggestions\",\"task_label\":\"Task 1: Beehive Analogy\",\"prerequisite_knowledge\":\"Basic understanding of how apps suggest content (e.g., YouTube recommendations)\",\"key_target_relations\":[\"DRIVES(profile\",\"candidates)\",\"FILTERS(range\",\"items)\",\"RANKS(similarity\",\"display)\"],\"mappings\":[{\"structural_component\":\"user\",\"analogy_name\":\"Bee\",\"analogy_description\":\"The user embodies a bee, navigating the garden with first-person flight controls\",\"asset_strategy\":\"primitive\",\"mapping_type\":\"object\",\"mapping_confidence\":\"strong\",\"primitive_type\":\"Cube\",\"trellis_prompt\":null,\"position\":[0.0,1.5,0.0],\"rotation\":[0.0,0.0,0.0],\"scale\":[0.3,0.3,0.3],\"color\":null,\"parent\":null,\"instance_count\":1,\"instance_spread\":3.0,\"interaction\":null},{\"structural_component\":\"content_item\",\"analogy_name\":\"Flower\",\"analogy_description\":\"3D models of flowers with varying attributes (color, petal shape, size)\",\"asset_strategy\":\"primitive\",\"mapping_type\":\"object\",\"mapping_confidence\":\"strong\",\"primitive_type\":\"Cube\",\"trellis_prompt\":null,\"position\":[0.0,0.0,5.0],\"rotation\":[0.0,0.0,0.0],\"scale\":[0.5,0.5,0.5],\"color\":null,\"parent\":null,\"instance_count\":8,\"instance_spread\":4.0,\"interaction\":null},{\"structural_component\":\"user_profile\",\"analogy_name\":\"Beehive\",\"analogy_description\":\"A central 3D beehive that physically moves within the garden space, representing the user profile\",\"asset_strategy\":\"primitive\",\"mapping_type\":\"object\",\"mapping_confidence\":\"strong\",\"primitive_type\":\"Cube\",\"trellis_prompt\":null,\"position\":[0.0,0.5,0.0],\"rotation\":[0.0,0.0,0.0],\"scale\":[0.8,0.8,0.8],\"color\":null,\"parent\":null,\"instance_count\":1,\"instance_spread\":3.0,\"interaction\":null},{\"structural_component\":\"user_interaction\",\"analogy_name\":\"Pollination\",\"analogy_description\":\"The user aims at a flower and triggers pollination with a visual/audio effect\",\"asset_strategy\":\"vfx\",\"mapping_type\":\"relation\",\"mapping_confidence\":\"strong\",\"primitive_type\":null,\"trellis_prompt\":null,\"position\":[0.0,1.0,0.0],\"rotation\":[0.0,0.0,0.0],\"scale\":[1.0,1.0,1.0],\"color\":null,\"parent\":null,\"instance_count\":1,\"instance_spread\":3.0,\"interaction\":{\"trigger\":\"button_press\",\"trigger_source\":\"Bee\",\"target_objects\":[\"Flower\"],\"effect\":\"emit_particles\",\"effect_description\":\"Yellow pollen particles burst from the flower when the bee pollinates it\",\"parameters\":{\"startColor\":[1.0,0.9,0.3,1.0],\"startSize\":0.1,\"startSpeed\":2.0,\"duration\":0.5},\"animation_preset\":\"\",\"vfx_type\":\"particle_burst\"}},{\"structural_component\":\"profile_update\",\"analogy_name\":\"BeehiveMovement\",\"analogy_description\":\"The beehive position drifts toward pollinated flowers, making profile updates spatial\",\"asset_strategy\":\"mechanic\",\"mapping_type\":\"relation\",\"mapping_confidence\":\"strong\",\"primitive_type\":null,\"trellis_prompt\":null,\"position\":[0.0,0.0,0.0],\"rotation\":[0.0,0.0,0.0],\"scale\":[1.0,1.0,1.0],\"color\":null,\"parent\":null,\"instance_count\":1,\"instance_spread\":3.0,\"interaction\":{\"trigger\":\"on_pollinate\",\"trigger_source\":\"Bee\",\"target_objects\":[\"Beehive\"],\"effect\":\"move_toward\",\"effect_description\":\"Beehive smoothly drifts toward the average position of recently pollinated flowers\",\"parameters\":{\"speed\":2.0,\"smoothTime\":0.5},\"animation_preset\":\"\",\"vfx_type\":\"\"}},{\"structural_component\":\"candidate_generation\",\"analogy_name\":\"PollenCircle\",\"analogy_description\":\"A visible circular boundary on the ground centered on the beehive, defining which flowers are candidates\",\"asset_strategy\":\"primitive\",\"mapping_type\":\"relation\",\"mapping_confidence\":\"strong\",\"primitive_type\":\"Cylinder\",\"trellis_prompt\":null,\"position\":[0.0,0.01,0.0],\"rotation\":[0.0,0.0,0.0],\"scale\":[8.0,0.01,8.0],\"color\":[1.0,0.9,0.3,0.3],\"parent\":null,\"instance_count\":1,\"instance_spread\":3.0,\"interaction\":{\"trigger\":\"proximity\",\"trigger_source\":\"Beehive\",\"target_objects\":[\"Flower\"],\"effect\":\"filter_in_range\",\"effect_description\":\"Only flowers within the pollen circle radius are candidates for recommendation\",\"parameters\":{\"radius\":8.0},\"animation_preset\":\"\",\"vfx_type\":\"\"}},{\"structural_component\":\"ranking\",\"analogy_name\":\"BudGrowth\",\"analogy_description\":\"Flower buds closest to the beehive grow into full flowers first, representing ranking through proximity\",\"asset_strategy\":\"mechanic\",\"mapping_type\":\"relation\",\"mapping_confidence\":\"moderate\",\"primitive_type\":null,\"trellis_prompt\":null,\"position\":[0.0,0.0,0.0],\"rotation\":[0.0,0.0,0.0],\"scale\":[1.0,1.0,1.0],\"color\":null,\"parent\":null,\"instance_count\":1,\"instance_spread\":3.0,\"interaction\":{\"trigger\":\"continuous\",\"trigger_source\":\"\",\"target_objects\":[\"Flower\"],\"effect\":\"grow\",\"effect_description\":\"Flowers closest to the beehive grow larger (scale up), representing proximity-based ranking\",\"parameters\":{\"maxScale\":1.5,\"growSpeed\":0.5},\"animation_preset\":\"pulse\",\"vfx_type\":\"\"}},{\"structural_component\":\"feedback_loop\",\"analogy_name\":\"GardenDynamics\",\"analogy_description\":\"Pollinating flowers moves the beehive, which causes similar flowers to grow nearby\",\"asset_strategy\":\"mechanic\",\"mapping_type\":\"higher_order\",\"mapping_confidence\":\"strong\",\"primitive_type\":null,\"trellis_prompt\":null,\"position\":[0.0,0.0,0.0],\"rotation\":[0.0,0.0,0.0],\"scale\":[1.0,1.0,1.0],\"color\":null,\"parent\":null,\"instance_count\":1,\"instance_spread\":3.0,\"interaction\":{\"trigger\":\"on_pollinate\",\"trigger_source\":\"Bee\",\"target_objects\":[\"Beehive\",\"Flower\",\"PollenCircle\"],\"effect\":\"feedback_loop\",\"effect_description\":\"Pollinating flowers moves the beehive (profile_update), which changes which flowers are in range (candidate_generation), which changes which buds grow (ranking), encouraging further similar pollination\",\"parameters\":{},\"animation_preset\":\"\",\"vfx_type\":\"\"}}],\"environment\":{\"setting\":\"garden\",\"terrain_type\":\"plane\",\"terrain_size\":[30.0,1.0,30.0],\"terrain_color\":[0.3,0.6,0.2,1.0],\"skybox\":\"sunny\",\"skybox_material_path\":null,\"ambient_color\":[0.8,0.9,0.7,1.0],\"lighting\":{\"color\":[1.0,0.95,0.9,1.0],\"intensity\":1.0,\"rotation\":[50.0,-30.0,0.0],\"shadow_type\":\"soft\"},\"camera\":{\"position\":[0.0,1.6,-5.0],\"rotation\":[10.0,0.0,0.0],\"field_of_view\":60.0,\"is_vr\":false},\"description\":\"A sunny garden with flowers around a central beehive\"},\"experience\":{\"objective\":\"Trigger the core interaction once and observe the system response. Learner can explain what changed and why after one full loop.\",\"success_criteria\":[\"Primary learner action: Trigger the core interaction once and observe the system response.\",\"Immediate feedback: A visible local response confirms the trigger fired.\",\"Delayed update: Manager state updates propagate to candidates/ranking after a short delay.\",\"Success evidence: Learner can explain what changed and why after one full loop.\"],\"progress_metric_label\":\"Loop Progress\",\"progress_target\":3,\"phases\":[{\"phase_name\":\"Intro\",\"objective\":\"Orient the learner to goal and controls.\",\"player_action\":\"Read objective and locate key objects.\",\"expected_feedback\":\"UI goal text and highlighted key objects.\",\"completion_criteria\":\"Learner enters Explore phase area.\"},{\"phase_name\":\"Explore\",\"objective\":\"Understand object roles and affordances.\",\"player_action\":\"Inspect main objects and labels.\",\"expected_feedback\":\"Context prompts and role labels appear.\",\"completion_criteria\":\"Learner interacts with the trigger source at least once.\"},{\"phase_name\":\"Trigger\",\"objective\":\"Perform the key interaction that starts the loop.\",\"player_action\":\"Activate trigger source (button/proximity/collision).\",\"expected_feedback\":\"Immediate local VFX/animation response.\",\"completion_criteria\":\"Trigger event fired and acknowledged in HUD.\"},{\"phase_name\":\"Observe Feedback Loop\",\"objective\":\"Watch profile/candidate/ranking updates propagate.\",\"player_action\":\"Track HUD and scene changes for system updates.\",\"expected_feedback\":\"Delayed manager updates and visible outcome changes.\",\"completion_criteria\":\"At least one full cause-effect cycle observed.\"},{\"phase_name\":\"Summary\",\"objective\":\"Consolidate what changed and why.\",\"player_action\":\"Review recap panel.\",\"expected_feedback\":\"Short explanation of causal chain and final state.\",\"completion_criteria\":\"Learner acknowledges summary.\"}],\"guided_prompts\":[{\"phase_name\":\"Intro\",\"prompt\":\"Your goal: complete one full interaction loop.\",\"optional\":true},{\"phase_name\":\"Explore\",\"prompt\":\"Move closer to key objects to discover their roles.\",\"optional\":true},{\"phase_name\":\"Trigger\",\"prompt\":\"Activate the trigger source to start the system response.\",\"optional\":true},{\"phase_name\":\"Observe Feedback Loop\",\"prompt\":\"Watch HUD updates: profile, candidates, ranking.\",\"optional\":true},{\"phase_name\":\"Summary\",\"prompt\":\"Review how your action changed recommendations.\",\"optional\":true}],\"feedback_hud_enabled\":true,\"feedback_hud_sections\":[\"Current objective\",\"Progress\",\"Last trigger\",\"Profile state\",\"Candidates\",\"Top-ranked result\"],\"spatial_staging\":[{\"zone_name\":\"Intro Zone\",\"purpose\":\"Onboarding and objective briefing\",\"anchor_object\":\"\",\"suggested_center\":[0.0,0.0,-6.0],\"suggested_radius\":3.0},{\"zone_name\":\"Interaction Zone\",\"purpose\":\"Primary trigger actions\",\"anchor_object\":\"\",\"suggested_center\":[0.0,0.0,0.0],\"suggested_radius\":4.5},{\"zone_name\":\"System Response Zone\",\"purpose\":\"Observe delayed updates and outcomes\",\"anchor_object\":\"\",\"suggested_center\":[8.0,0.0,0.0],\"suggested_radius\":4.5}],\"audio_cues\":[{\"cue_name\":\"trigger_click\",\"trigger\":\"on_trigger\",\"purpose\":\"Confirm action occurred\",\"delay_seconds\":0.0,\"volume\":0.7},{\"cue_name\":\"system_update\",\"trigger\":\"on_profile_or_candidate_update\",\"purpose\":\"Signal delayed system response\",\"delay_seconds\":0.4,\"volume\":0.55},{\"cue_name\":\"success_chime\",\"trigger\":\"on_success_criteria_met\",\"purpose\":\"Reinforce completion\",\"delay_seconds\":0.0,\"volume\":0.75}],\"timing_guidelines\":{\"immediate_feedback_delay_seconds\":0.1,\"delayed_update_delay_seconds\":0.6,\"summary_delay_seconds\":0.5},\"causal_chain\":[]},\"essence\":null,\"surface\":{\"style_seed\":0,\"style_mood\":\"natural\",\"variation_level\":\"medium\",\"character_style\":\"default\",\"asset_style\":\"default\",\"ui_skin\":\"default\",\"vfx_style\":\"default\"},\"essence_hash\":null}"}}],"parallel":false,"note":"Validate Essence invariants and required runtime anchors before scene mutation.","batch_size_limit":1,"fail_fast":true},{"phase_name":"environment","phase_number":1,"commands":[{"tool":"manage_gameobject","params":{"action":"create","name":"Ground","primitive_type":"Plane","position":[0,0,0],"scale":[30.0,1.0,30.0]}},{"tool":"manage_material","params":{"action":"set_renderer_color","target":"Ground","color":[0.3,0.6,0.2,1.0]}},{"tool":"manage_gameobject","params":{"action":"create","name":"Directional Light","position":[0,10,0],"rotation":[50.0,-30.0,0.0]}},{"tool":"manage_components","params":{"action":"add","target":"Directional Light","component_type":"Light"}},{"tool":"manage_components","params":{"action":"set_property","target":"Directional Light","component_type":"Light","property":"intensity","value":1.0}},{"tool":"manage_components","params":{"action":"set_property","target":"Directional Light","component_type":"Light","property":"color","value":{"r":1.0,"g":0.95,"b":0.9,"a":1.0}}},{"tool":"manage_gameobject","params":{"action":"create","name":"Main Camera","position":[0.0,1.6,-5.0],"rotation":[10.0,0.0,0.0]}},{"tool":"manage_components","params":{"action":"add","target":"Main Camera","component_type":"Camera"}},{"tool":"manage_gameobject","params":{"action":"create","name":"GameManager","position":[0,0,0]}},{"tool":"manage_gameobject","params":{"action":"create","name":"ProfileManager","position":[0,0,0]}},{"tool":"manage_gameobject","params":{"action":"create","name":"CandidateManager","position":[0,0,0]}},{"tool":"manage_gameobject","params":{"action":"create","name":"RankingManager","position":[0,0,0]}},{"tool":"manage_gameobject","params":{"action":"create","name":"InteractionManager","position":[0,0,0]}},{"tool":"manage_gameobject","params":{"action":"create","name":"FeedbackHUD","position":[0,1.8,2.0]}},{"tool":"manage_gameobject","params":{"action":"create","name":"HUD_BeginnerGuide","parent":"FeedbackHUD","position":[0,0,0],"scale":[0.3,0.1,0.3]}},{"tool":"manage_gameobject","params":{"action":"create","name":"HUD_StatusReadout","parent":"FeedbackHUD","position":[0,0,0],"scale":[0.3,0.1,0.3]}}],"parallel":true,"note":"Ground plane, directional light, camera setup","batch_size_limit":40,"fail_fast":true},{"phase_name":"objects","phase_number":2,"commands":[{"tool":"manage_gameobject","params":{"action":"create","name":"Bee","primitive_type":"Cube","position":[0.0,1.5,0.0],"rotation":[0,0,0],"scale":[0.3,0.3,0.3]}},{"tool":"manage_gameobject","params":{"action":"create","name":"Flower_1","primitive_type":"Cube","position":[0.0,0.0,5.0],"rotation":[0,0,0],"scale":[0.5,0.5,0.5]}},{"tool":"manage_gameobject","params":{"action":"create","name":"Flower_2","primitive_type":"Cube","position":[2.8284271247461903,0.0,7.82842712474619],"rotation":[0,0,0],"scale":[0.5,0.5,0.5]}},{"tool":"manage_gameobject","params":{"action":"create","name":"Flower_3","primitive_type":"Cube","position":[2.4492935982947064e-16,0.0,9.0],"rotation":[0,0,0],"scale":[0.5,0.5,0.5]}},{"tool":"manage_gameobject","params":{"action":"create","name":"Flower_4","primitive_type":"Cube","position":[-2.82842712474619,0.0,7.82842712474619],"rotation":[0,0,0],"scale":[0.5,0.5,0.5]}},{"tool":"manage_gameobject","params":{"action":"create","name":"Flower_5","primitive_type":"Cube","position":[-4.0,0.0,5.000000000000001],"rotation":[0,0,0],"scale":[0.5,0.5,0.5]}},{"tool":"manage_gameobject","params":{"action":"create","name":"Flower_6","primitive_type":"Cube","position":[-2.8284271247461907,0.0,2.17157287525381],"rotation":[0,0,0],"scale":[0.5,0.5,0.5]}},{"tool":"manage_gameobject","params":{"action":"create","name":"Flower_7","primitive_type":"Cube","position":[-7.347880794884119e-16,0.0,1.0],"rotation":[0,0,0],"scale":[0.5,0.5,0.5]}},{"tool":"manage_gameobject","params":{"action":"create","name":"Flower_8","primitive_type":"Cube","position":[2.8284271247461894,0.0,2.1715728752538093],"rotation":[0,0,0],"scale":[0.5,0.5,0.5]}},{"tool":"manage_gameobject","params":{"action":"create","name":"Beehive","primitive_type":"Cube","position":[0.0,0.5,0.0],"rotation":[0,0,0],"scale":[0.8,0.8,0.8]}},{"tool":"manage_gameobject","params":{"action":"create","name":"Pollination","position":[0.0,1.0,0.0],"rotation":[0,0,0],"scale":[1.0,1.0,1.0]}},{"tool":"manage_gameobject","params":{"action":"create","name":"PollenCircle","primitive_type":"Cylinder","position":[0.0,0.01,0.0],"rotation":[0,0,0],"scale":[8.0,0.01,8.0]}}],"parallel":true,"note":"Create all primitives and start Trellis generations","batch_size_limit":40,"fail_fast":true},{"phase_name":"materials","phase_number":3,"commands":[{"tool":"manage_material","params":{"action":"set_renderer_color","target":"Bee","color":[1.0,0.82,0.2,1.0]}},{"tool":"manage_material","params":{"action":"set_renderer_color","target":"Flower_1","color":[0.95,0.44,0.58,1.0]}},{"tool":"manage_material","params":{"action":"set_renderer_color","target":"Flower_2","color":[0.42,0.72,0.94,1.0]}},{"tool":"manage_material","params":{"action":"set_renderer_color","target":"Flower_3","color":[0.98,0.74,0.3,1.0]}},{"tool":"manage_material","params":{"action":"set_renderer_color","target":"Flower_4","color":[0.62,0.8,0.38,1.0]}},{"tool":"manage_material","params":{"action":"set_renderer_color","target":"Flower_5","color":[0.95,0.44,0.58,1.0]}},{"tool":"manage_material","params":{"action":"set_renderer_color","target":"Flower_6","color":[0.42,0.72,0.94,1.0]}},{"tool":"manage_material","params":{"action":"set_renderer_color","target":"Flower_7","color":[0.98,0.74,0.3,1.0]}},{"tool":"manage_material","params":{"action":"set_renderer_color","target":"Flower_8","color":[0.62,0.8,0.38,1.0]}},{"tool":"manage_material","params":{"action":"set_renderer_color","target":"Beehive","color":[0.86,0.64,0.28,1.0]}},{"tool":"manage_material","params":{"action":"set_renderer_color","target":"PollenCircle","color":[1.0,0.9,0.3,0.3]}}],"parallel":true,"note":"Apply colors and materials to objects","batch_size_limit":40,"fail_fast":true},{"phase_name":"scripts","phase_number":4,"commands":[{"tool":"create_script","params":{"path":"Assets/Scripts/GameManager.cs","contents_omitted":true}},{"tool":"create_script","params":{"path":"Assets/Scripts/ProfileManager.cs","contents_omitted":true}},{"tool":"create_script","params":{"path":"Assets/Scripts/CandidateManager.cs","contents_omitted":true}},{"tool":"create_script","params":{"path":"Assets/Scripts/RankingManager.cs","contents_omitted":true}},{"tool":"create_script","params":{"path":"Assets/Scripts/InteractionManager.cs","contents_omitted":true}},{"tool":"create_script","params":{"path":"Assets/Scripts/PollinationTrigger.cs","contents_omitted":true}},{"tool":"create_script","params":{"path":"Assets/Scripts/BeehiveMovementController.cs","contents_omitted":true}},{"tool":"create_script","params":{"path":"Assets/Scripts/PollenCircleController.cs","contents_omitted":true}},{"tool":"create_script","params":{"path":"Assets/Scripts/BudGrowthController.cs","contents_omitted":true}},{"tool":"create_script","params":{"path":"Assets/Scripts/GardenDynamicsController.cs","contents_omitted":true}},{"tool":"create_script","params":{"path":"Assets/Scripts/BeginnerGuideUI.cs","contents_omitted":true}},{"tool":"refresh_unity","params":{"compile":"request"}},{"tool":"refresh_unity","params":{"wait_for_ready":true}}],"parallel":false,"note":"Create interaction scripts and trigger compilation","batch_size_limit":8,"fail_fast":true},{"phase_name":"components_vfx","phase_number":5,"commands":[{"tool":"manage_components","params":{"action":"add","target":"Pollination","component_type":"ParticleSystem"}},{"tool":"manage_components","params":{"action":"add","target":"Beehive","component_type":"SphereCollider"}},{"tool":"manage_components","params":{"action":"set_property","target":"Beehive","component_type":"SphereCollider","property":"isTrigger","value":true}},{"tool":"manage_components","params":{"action":"set_property","target":"Beehive","component_type":"SphereCollider","property":"radius","value":8.0}},{"tool":"manage_components","params":{"action":"add","target":"GameManager","component_type":"GameManager"}},{"tool":"manage_components","params":{"action":"add","target":"ProfileManager","component_type":"ProfileManager"}},{"tool":"manage_components","params":{"action":"add","target":"CandidateManager","component_type":"CandidateManager"}},{"tool":"manage_components","params":{"action":"add","target":"RankingManager","component_type":"RankingManager"}},{"tool":"manage_components","params":{"action":"add","target":"InteractionManager","component_type":"InteractionManager"}},{"tool":"manage_components","params":{"action":"add","target":"Bee","component_type":"PollinationTrigger"}},{"tool":"manage_components","params":{"action":"add","target":"Beehive","component_type":"BeehiveMovementController"}},{"tool":"manage_components","params":{"action":"add","target":"Beehive","component_type":"PollenCircleController"}},{"tool":"manage_components","params":{"action":"add","target":"Flower_1","component_type":"BudGrowthController"}},{"tool":"manage_components","params":{"action":"add","target":"Bee","component_type":"GardenDynamicsController"}},{"tool":"manage_components","params":{"action":"add","target":"FeedbackHUD","component_type":"BeginnerGuideUI"}},{"tool":"manage_components","params":{"action":"add","target":"FeedbackHUD","component_type":"Canvas"}},{"tool":"manage_components","params":{"action":"add","target":"FeedbackHUD","component_type":"CanvasScaler"}},{"tool":"manage_components","params":{"action":"add","target":"FeedbackHUD","component_type":"GraphicRaycaster"}},{"tool":"manage_vfx","params":{"action":"particle_set_main","target":"Pollination","properties":{"playOnAwake":false,"startColor":[1.0,0.9,0.3,1.0],"startSize":0.1,"startSpeed":2.0,"duration":0.5,"startLifetime":1.0,"maxParticles":50,"looping":false}}},{"tool":"manage_vfx","params":{"action":"particle_set_emission","target":"Pollination","properties":{"rateOverTime":0}}}],"parallel":true,"note":"Add Rigidbody, colliders, particle systems, script attachment","batch_size_limit":40,"fail_fast":true},{"phase_name":"animations","phase_number":6,"commands":[{"tool":"manage_animation","params":{"action":"clip_create_preset","target":"Flower_1","properties":{"preset":"pulse","clipPath":"Assets/Animations/Flower_1_pulse.anim","loop":true}}},{"tool":"manage_animation","params":{"action":"controller_create","controller_path":"Assets/Animations/Flower_1_Controller.controller"}},{"tool":"manage_animation","params":{"action":"controller_add_state","controller_path":"Assets/Animations/Flower_1_Controller.controller","properties":{"stateName":"pulse","clipPath":"Assets/Animations/Flower_1_pulse.anim"}}},{"tool":"manage_animation","params":{"action":"controller_assign","target":"Flower_1","controller_path":"Assets/Animations/Flower_1_Controller.controller"}},{"tool":"manage_animation","params":{"action":"clip_create_preset","target":"Flower_2","properties":{"preset":"pulse","clipPath":"Assets/Animations/Flower_2_pulse.anim","loop":true}}},{"tool":"manage_animation","params":{"action":"controller_create","controller_path":"Assets/Animations/Flower_2_Controller.controller"}},{"tool":"manage_animation","params":{"action":"controller_add_state","controller_path":"Assets/Animations/Flower_2_Controller.controller","properties":{"stateName":"pulse","clipPath":"Assets/Animations/Flower_2_pulse.anim"}}},{"tool":"manage_animation","params":{"action":"controller_assign","target":"Flower_2","controller_path":"Assets/Animations/Flower_2_Controller.controller"}},{"tool":"manage_animation","params":{"action":"clip_create_preset","target":"Flower_3","properties":{"preset":"pulse","clipPath":"Assets/Animations/Flower_3_pulse.anim","loop":true}}},{"tool":"manage_animation","params":{"action":"controller_create","controller_path":"Assets/Animations/Flower_3_Controller.controller"}},{"tool":"manage_animation","params":{"action":"controller_add_state","controller_path":"Assets/Animations/Flower_3_Controller.controller","properties":{"stateName":"pulse","clipPath":"Assets/Animations/Flower_3_pulse.anim"}}},{"tool":"manage_animation","params":{"action":"controller_assign","target":"Flower_3","controller_path":"Assets/Animations/Flower_3_Controller.controller"}},{"tool":"manage_animation","params":{"action":"clip_create_preset","target":"Flower_4","properties":{"preset":"pulse","clipPath":"Assets/Animations/Flower_4_pulse.anim","loop":true}}},{"tool":"manage_animation","params":{"action":"controller_create","controller_path":"Assets/Animations/Flower_4_Controller.controller"}},{"tool":"manage_animation","params":{"action":"controller_add_state","controller_path":"Assets/Animations/Flower_4_Controller.controller","properties":{"stateName":"pulse","clipPath":"Assets/Animations/Flower_4_pulse.anim"}}},{"tool":"manage_animation","params":{"action":"controller_assign","target":"Flower_4","controller_path":"Assets/Animations/Flower_4_Controller.controller"}},{"tool":"manage_animation","params":{"action":"clip_create_preset","target":"Flower_5","properties":{"preset":"pulse","clipPath":"Assets/Animations/Flower_5_pulse.anim","loop":true}}},{"tool":"manage_animation","params":{"action":"controller_create","controller_path":"Assets/Animations/Flower_5_Controller.controller"}},{"tool":"manage_animation","params":{"action":"controller_add_state","controller_path":"Assets/Animations/Flower_5_Controller.controller","properties":{"stateName":"pulse","clipPath":"Assets/Animations/Flower_5_pulse.anim"}}},{"tool":"manage_animation","params":{"action":"controller_assign","target":"Flower_5","controller_path":"Assets/Animations/Flower_5_Controller.controller"}},{"tool":"manage_animation","params":{"action":"clip_create_preset","target":"Flower_6","properties":{"preset":"pulse","clipPath":"Assets/Animations/Flower_6_pulse.anim","loop":true}}},{"tool":"manage_animation","params":{"action":"controller_create","controller_path":"Assets/Animations/Flower_6_Controller.controller"}},{"tool":"manage_animation","params":{"action":"controller_add_state","controller_path":"Assets/Animations/Flower_6_Controller.controller","properties":{"stateName":"pulse","clipPath":"Assets/Animations/Flower_6_pulse.anim"}}},{"tool":"manage_animation","params":{"action":"controller_assign","target":"Flower_6","controller_path":"Assets/Animations/Flower_6_Controller.controller"}},{"tool":"manage_animation","params":{"action":"clip_create_preset","target":"Flower_7","properties":{"preset":"pulse","clipPath":"Assets/Animations/Flower_7_pulse.anim","loop":true}}},{"tool":"manage_animation","params":{"action":"controller_create","controller_path":"Assets/Animations/Flower_7_Controller.controller"}},{"tool":"manage_animation","params":{"action":"controller_add_state","controller_path":"Assets/Animations/Flower_7_Controller.controller","properties":{"stateName":"pulse","clipPath":"Assets/Animations/Flower_7_pulse.anim"}}},{"tool":"manage_animation","params":{"action":"controller_assign","target":"Flower_7","controller_path":"Assets/Animations/Flower_7_Controller.controller"}},{"tool":"manage_animation","params":{"action":"clip_create_preset","target":"Flower_8","properties":{"preset":"pulse","clipPath":"Assets/Animations/Flower_8_pulse.anim","loop":true}}},{"tool":"manage_animation","params":{"action":"controller_create","controller_path":"Assets/Animations/Flower_8_Controller.controller"}},{"tool":"manage_animation","params":{"action":"controller_add_state","controller_path":"Assets/Animations/Flower_8_Controller.controller","properties":{"stateName":"pulse","clipPath":"Assets/Animations/Flower_8_pulse.anim"}}},{"tool":"manage_animation","params":{"action":"controller_assign","target":"Flower_8","controller_path":"Assets/Animations/Flower_8_Controller.controller"}}],"parallel":true,"note":"Create animation clips, controllers, and assign to objects","batch_size_limit":40,"fail_fast":true},{"phase_name":"smoke_test","phase_number":8,"commands":[{"tool":"scene_generator","params":{"action":"smoke_test_scene","play_seconds":5,"include_warnings":true,"fail_on_warning":false}}],"parallel":false,"note":"Required gate: run Play Mode smoke test and block completion on runtime errors.","batch_size_limit":1,"fail_fast":true},{"phase_name":"scene_save","phase_number":9,"commands":[{"tool":"manage_scene","params":{"action":"save"}}],"parallel":false,"note":"Save the scene only after smoke test passes","batch_size_limit":1,"fail_fast":true}],"manager_tasks":[{"manager_id":"manager_game_manager","manager_name":"GameManager","script_name":"GameManager.cs","attach_to":"GameManager","orchestration_scope":"global","required_reason":"Global scene coordinator required for cross-mapping orchestration.","responsibilities":["Bootstrap shared runtime state and register focused managers.","Route interaction events between focused managers.","Own and execute the end-to-end feedback loop orchestration.","Act as ExperienceDirector for learner flow: Intro -> Explore -> Trigger -> Observe Feedback Loop -> Summary.","Advance experience phases based on explicit completion criteria.","Drive objective/progress UI and preserve causal visibility (trigger -> immediate -> delayed -> outcome).","Primary learner objective: Trigger the core interaction once and observe the system response. Learner can explain what changed and why after one full loop.","Success criterion: Primary learner action: Trigger the core interaction once and observe the system response.","Success criterion: Immediate feedback: A visible local response confirms the trigger fired.","Success criterion: Delayed update: Manager state updates propagate to candidates/ranking after a short delay.","Success criterion: Success evidence: Learner can explain what changed and why after one full loop.","Maintain a toggleable feedback HUD that exposes system state updates in real time.","Feedback loop 'GardenDynamics': Pollinating flowers moves the beehive (profile_update), which changes which flowers are in range (candidate_generation), which changes which buds grow (ranking), encouraging further similar pollination"],"creates_or_updates":["GameManager GameObject","GameManager.cs script component","Shared state: profile, candidates, ranking cache","Experience phase state machine","Objective/progress tracker","Guided prompt presenter","Feedback HUD state"],"listens_to":["button_press","on_pollinate","proximity","continuous"],"emits":["OnProfileUpdated","OnCandidatesUpdated","OnRankingUpdated","OnFeedbackLoopTick","OnExperiencePhaseChanged","OnObjectiveProgressChanged"],"managed_mappings":["Bee","Flower","Beehive","Pollination","BeehiveMovement","PollenCircle","BudGrowth","GardenDynamics"]},{"manager_id":"manager_profile","manager_name":"ProfileManager","script_name":"ProfileManager.cs","attach_to":"ProfileManager","orchestration_scope":"focused","required_reason":"Profile state updates are required by analogy mappings.","responsibilities":["Maintain learner profile state derived from interactions.","Apply profile_update mapping effects deterministically."],"creates_or_updates":["Profile state model","Profile update handlers"],"listens_to":["on_pollinate"],"emits":["OnProfileUpdated"],"managed_mappings":["BeehiveMovement","Beehive"]},{"manager_id":"manager_candidate","manager_name":"CandidateManager","script_name":"CandidateManager.cs","attach_to":"CandidateManager","orchestration_scope":"focused","required_reason":"Candidate filtering/range selection behavior is required.","responsibilities":["Maintain active candidate set for content selection.","Apply candidate_generation filters (range/constraints)."],"creates_or_updates":["Candidate set cache","Candidate filter routines"],"listens_to":["proximity"],"emits":["OnCandidatesUpdated"],"managed_mappings":["PollenCircle"]},{"manager_id":"manager_ranking","manager_name":"RankingManager","script_name":"RankingManager.cs","attach_to":"RankingManager","orchestration_scope":"focused","required_reason":"Ranking/sorting behavior is required by analogy mappings.","responsibilities":["Compute ordered ranking over active candidates.","Apply ranking interaction effects and tie-break policies."],"creates_or_updates":["Ranking list","Ranking update rules"],"listens_to":["continuous"],"emits":["OnRankingUpdated"],"managed_mappings":["BudGrowth"]},{"manager_id":"manager_interaction","manager_name":"InteractionManager","script_name":"InteractionManager.cs","attach_to":"InteractionManager","orchestration_scope":"focused","required_reason":"User-triggered interactions are present and need centralized dispatch.","responsibilities":["Normalize user triggers and dispatch to GameManager pipeline.","Coordinate trigger guards/cooldowns across interaction mappings."],"creates_or_updates":["Trigger dispatch table","Interaction event adapters"],"listens_to":["button_press"],"emits":["OnUserInteraction"],"managed_mappings":["Pollination"]}],"script_tasks":[{"task_id":"script_task_4_pollination","task_kind":"trigger_vfx","mapping_name":"Pollination","structural_component":"user_interaction","asset_strategy":"vfx","script_name":"PollinationTrigger","attach_to":"Bee","trigger":"button_press","trigger_source":"Bee","target_objects":["Flower_1","Flower_2","Flower_3","Flower_4","Flower_5","Flower_6","Flower_7","Flower_8"],"effect":"emit_particles","effect_description":"Yellow pollen particles burst from the flower when the bee pollinates it","parameters":{"startColor":[1.0,0.9,0.3,1.0],"startSize":0.1,"startSpeed":2.0,"duration":0.5},"animation_preset":"","vfx_type":"particle_burst","preconditions":["Pollination:ParticleSystemConfigured"],"notes":["Capture learner action and fan out to the next state transition.","Do not use tag-based lookup APIs (CompareTag/FindGameObjectsWithTag). Use explicit references/lists."]},{"task_id":"script_task_5_beehivemovement","task_kind":"profile_update_logic","mapping_name":"BeehiveMovement","structural_component":"profile_update","asset_strategy":"mechanic","script_name":"BeehiveMovementController","attach_to":"Beehive","trigger":"on_pollinate","trigger_source":"Bee","target_objects":["Beehive"],"effect":"move_toward","effect_description":"Beehive smoothly drifts toward the average position of recently pollinated flowers","parameters":{"speed":2.0,"smoothTime":0.5},"animation_preset":"","vfx_type":"","preconditions":[],"notes":["Do not use tag-based lookup APIs (CompareTag/FindGameObjectsWithTag). Use explicit references/lists."]},{"task_id":"script_task_6_pollencircle","task_kind":"candidate_filter_logic","mapping_name":"PollenCircle","structural_component":"candidate_generation","asset_strategy":"primitive","script_name":"PollenCircleController","attach_to":"Beehive","trigger":"proximity","trigger_source":"Beehive","target_objects":["Flower_1","Flower_2","Flower_3","Flower_4","Flower_5","Flower_6","Flower_7","Flower_8"],"effect":"filter_in_range","effect_description":"Only flowers within the pollen circle radius are candidates for recommendation","parameters":{"radius":8.0},"animation_preset":"","vfx_type":"","preconditions":["Beehive:SphereCollider(isTrigger=true,radius=8.0)"],"notes":["Track in-range candidates and keep a stable, queryable candidate set.","Do not use tag-based lookup APIs (CompareTag/FindGameObjectsWithTag). Use explicit references/lists."]},{"task_id":"script_task_7_budgrowth","task_kind":"ranking_logic","mapping_name":"BudGrowth","structural_component":"ranking","asset_strategy":"mechanic","script_name":"BudGrowthController","attach_to":"Flower_1","trigger":"continuous","trigger_source":"BudGrowth","target_objects":["Flower_1","Flower_2","Flower_3","Flower_4","Flower_5","Flower_6","Flower_7","Flower_8"],"effect":"grow","effect_description":"Flowers closest to the beehive grow larger (scale up), representing proximity-based ranking","parameters":{"maxScale":1.5,"growSpeed":0.5},"animation_preset":"pulse","vfx_type":"","preconditions":["AnimationPreset:pulse"],"notes":["Apply deterministic ordering for repeated runs.","Do not use tag-based lookup APIs (CompareTag/FindGameObjectsWithTag). Use explicit references/lists."]},{"task_id":"script_task_8_gardendynamics","task_kind":"feedback_orchestrator","mapping_name":"GardenDynamics","structural_component":"feedback_loop","asset_strategy":"mechanic","script_name":"GardenDynamicsController","attach_to":"Bee","trigger":"on_pollinate","trigger_source":"Bee","target_objects":["Beehive","Flower_1","Flower_2","Flower_3","Flower_4","Flower_5","Flower_6","Flower_7","Flower_8","PollenCircle"],"effect":"feedback_loop","effect_description":"Pollinating flowers moves the beehive (profile_update), which changes which flowers are in range (candidate_generation), which changes which buds grow (ranking), encouraging further similar pollination","parameters":{},"animation_preset":"","vfx_type":"","preconditions":[],"notes":["Orchestrate profile update -> candidate generation -> ranking chain.","Do not use tag-based lookup APIs (CompareTag/FindGameObjectsWithTag). Use explicit references/lists."]}],"experience_plan":{"objective":"Trigger the core interaction once and observe the system response. Learner can explain what changed and why after one full loop.","success_criteria":["Primary learner action: Trigger the core interaction once and observe the system response.","Immediate feedback: A visible local response confirms the trigger fired.","Delayed update: Manager state updates propagate to candidates/ranking after a short delay.","Success evidence: Learner can explain what changed and why after one full loop."],"progress_metric_label":"Loop Progress","progress_target":3,"phases":[{"phase_name":"Intro","objective":"Orient the learner to goal and controls.","player_action":"Read objective and locate key objects.","expected_feedback":"UI goal text and highlighted key objects.","completion_criteria":"Learner enters Explore phase area."},{"phase_name":"Explore","objective":"Understand object roles and affordances.","player_action":"Inspect main objects and labels.","expected_feedback":"Context prompts and role labels appear.","completion_criteria":"Learner interacts with the trigger source at least once."},{"phase_name":"Trigger","objective":"Perform the key interaction that starts the loop.","player_action":"Activate trigger source (button/proximity/collision).","expected_feedback":"Immediate local VFX/animation response.","completion_criteria":"Trigger event fired and acknowledged in HUD."},{"phase_name":"Observe Feedback Loop","objective":"Watch profile/candidate/ranking updates propagate.","player_action":"Track HUD and scene changes for system updates.","expected_feedback":"Delayed manager updates and visible outcome changes.","completion_criteria":"At least one full cause-effect cycle observed."},{"phase_name":"Summary","objective":"Consolidate what changed and why.","player_action":"Review recap panel.","expected_feedback":"Short explanation of causal chain and final state.","completion_criteria":"Learner acknowledges summary."}],"guided_prompts":[{"phase_name":"Intro","prompt":"Your goal: complete one full interaction loop.","optional":true},{"phase_name":"Explore","prompt":"Move closer to key objects to discover their roles.","optional":true},{"phase_name":"Trigger","prompt":"Activate the trigger source to start the system response.","optional":true},{"phase_name":"Observe Feedback Loop","prompt":"Watch HUD updates: profile, candidates, ranking.","optional":true},{"phase_name":"Summary","prompt":"Review how your action changed recommendations.","optional":true}],"feedback_hud_enabled":true,"feedback_hud_sections":["Current objective","Progress","Last trigger","Profile state","Candidates","Top-ranked result"],"spatial_staging":[{"zone_name":"Intro Zone","purpose":"Onboarding and objective briefing","anchor_object":"","suggested_center":[0.0,0.0,-6.0],"suggested_radius":3.0},{"zone_name":"Interaction Zone","purpose":"Primary trigger actions","anchor_object":"","suggested_center":[0.0,0.0,0.0],"suggested_radius":4.5},{"zone_name":"System Response Zone","purpose":"Observe delayed updates and outcomes","anchor_object":"","suggested_center":[8.0,0.0,0.0],"suggested_radius":4.5}],"audio_cues":[{"cue_name":"trigger_click","trigger":"on_trigger","purpose":"Confirm action occurred","delay_seconds":0.0,"volume":0.7},{"cue_name":"system_update","trigger":"on_profile_or_candidate_update","purpose":"Signal delayed system response","delay_seconds":0.4,"volume":0.55},{"cue_name":"success_chime","trigger":"on_success_criteria_met","purpose":"Reinforce completion","delay_seconds":0.0,"volume":0.75}],"timing_guidelines":{"immediate_feedback_delay_seconds":0.1,"delayed_update_delay_seconds":0.6,"summary_delay_seconds":0.5},"causal_chain":[{"step":1,"trigger_event":"Bee:button_press","immediate_feedback":"Yellow pollen particles burst from the flower when the bee pollinates it","delayed_system_update":"Update shared manager state and propagate to dependent systems.","observable_outcome":"Learner can observe a change on Flower."},{"step":2,"trigger_event":"Bee:on_pollinate","immediate_feedback":"Beehive smoothly drifts toward the average position of recently pollinated flowers","delayed_system_update":"Update profile state from interaction history.","observable_outcome":"Learner can observe a change on Beehive."},{"step":3,"trigger_event":"Beehive:proximity","immediate_feedback":"Only flowers within the pollen circle radius are candidates for recommendation","delayed_system_update":"Recompute in-range candidate set.","observable_outcome":"Learner can observe a change on Flower."},{"step":4,"trigger_event":"BudGrowth:continuous","immediate_feedback":"Flowers closest to the beehive grow larger (scale up), representing proximity-based ranking","delayed_system_update":"Re-rank candidates using current profile signals.","observable_outcome":"Learner can observe a change on Flower."},{"step":5,"trigger_event":"Bee:on_pollinate","immediate_feedback":"Pollinating flowers moves the beehive (profile_update), which changes which flowers are in range (candidate_generation), which changes which buds grow (ranking), encouraging further similar pollination","delayed_system_update":"Propagate profile -> candidates -> ranking loop updates.","observable_outcome":"Learner can observe a change on Beehive, Flower, PollenCircle."}]},"audit_rules":{"hard_fail_patterns":["unknown action","target gameobject not found","missing target","compilation failed","exception"],"retryable_patterns":["busy","compiling","timeout","temporarily unavailable"],"warning_patterns":["already exists","already added","no-op"],"banned_script_lookup_patterns":["CompareTag(","FindGameObjectsWithTag("]},"smoke_test_plan":{"required":true,"play_seconds":5,"include_warnings":true,"fail_on_warning":false},"warnings":["Expanded 'Flower' to concrete instances for animation mapping 'BudGrowth': Flower_1, Flower_2, Flower_3, Flower_4, Flower_5, Flower_6, Flower_7, Flower_8","Expanded 'Flower' to concrete instances for script targets 'Pollination': Flower_1, Flower_2, Flower_3, Flower_4, Flower_5, Flower_6, Flower_7, Flower_8","Expanded 'Flower' to concrete instances for script targets 'PollenCircle': Flower_1, Flower_2, Flower_3, Flower_4, Flower_5, Flower_6, Flower_7, Flower_8","Expanded 'Flower' to concrete instances for script targets 'BudGrowth': Flower_1, Flower_2, Flower_3, Flower_4, Flower_5, Flower_6, Flower_7, Flower_8","Expanded 'Flower' to concrete instances for script targets 'GardenDynamics': Flower_1, Flower_2, Flower_3, Flower_4, Flower_5, Flower_6, Flower_7, Flower_8","Injected feedback HUD root anchor."]}